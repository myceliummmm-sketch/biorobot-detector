"""
Questions structure for IDEA phase cards.
Each card has 5 questions that guide the user through structured thinking.
"""

from typing import Dict, List

# Card types in order for IDEA phase
IDEA_CARDS_ORDER = ["product", "problem", "audience", "value", "vision"]

# Questions for each card type
IDEA_QUESTIONS: Dict[str, List[Dict]] = {
    "product": {
        "title": "Product",
        "emoji": "üéØ",
        "intro": "–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã —Å—Ç—Ä–æ–∏—à—å?",
        "questions": [
            {
                "id": 1,
                "text": "–û–ø–∏—à–∏ –ø—Ä–æ–¥—É–∫—Ç –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º. –ß—Ç–æ —ç—Ç–æ?",
                "hint": "–ù–∞–ø—Ä–∏–º–µ—Ä: '–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø—Ä–∏–≤—ã—á–µ–∫'",
                "field": "description"
            },
            {
                "id": 2,
                "text": "–ö–∞–∫—É—é –≥–ª–∞–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç?",
                "hint": "–û–¥–Ω–æ –∫–ª—é—á–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                "field": "core_function"
            },
            {
                "id": 3,
                "text": "–ß–µ–º —Ç–≤–æ–π –ø—Ä–æ–¥—É–∫—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—à–µ–Ω–∏–π?",
                "hint": "–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤",
                "field": "differentiator"
            },
            {
                "id": 4,
                "text": "–ù–∞ –∫–∞–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å? (web/mobile/desktop/API)",
                "hint": "–ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –Ω–æ –Ω–∞—á–Ω–∏ —Å –≥–ª–∞–≤–Ω–æ–π",
                "field": "platform"
            },
            {
                "id": 5,
                "text": "–ö–∞–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞ 2 –Ω–µ–¥–µ–ª–∏?",
                "hint": "–°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É",
                "field": "mvp"
            }
        ]
    },

    "problem": {
        "title": "Problem",
        "emoji": "üî•",
        "intro": "–¢–µ–ø–µ—Ä—å –ø—Ä–æ –±–æ–ª—å. –ö–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É —Ç—ã —Ä–µ—à–∞–µ—à—å?",
        "questions": [
            {
                "id": 1,
                "text": "–ö–∞–∫—É—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç?",
                "hint": "–û–ø–∏—à–∏ –±–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ",
                "field": "pain_point"
            },
            {
                "id": 2,
                "text": "–ö–∞–∫ –ª—é–¥–∏ —Ä–µ—à–∞—é—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Å–µ–π—á–∞—Å?",
                "hint": "–¢–µ–∫—É—â–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã, –∫–æ—Å—Ç—ã–ª–∏, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ",
                "field": "current_solutions"
            },
            {
                "id": 3,
                "text": "–ü–æ—á–µ–º—É —Ç–µ–∫—É—â–∏–µ —Ä–µ—à–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç?",
                "hint": "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–ª–æ—Ö–æ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö",
                "field": "why_fail"
            },
            {
                "id": 4,
                "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞?",
                "hint": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ? –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é? –ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö?",
                "field": "frequency"
            },
            {
                "id": 5,
                "text": "–°–∫–æ–ª—å–∫–æ –ª—é–¥–∏ –≥–æ—Ç–æ–≤—ã –ø–ª–∞—Ç–∏—Ç—å –∑–∞ —Ä–µ—à–µ–Ω–∏–µ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã?",
                "hint": "–û—Ü–µ–Ω–∫–∞: –±–µ—Å–ø–ª–∞—Ç–Ω–æ / $5-10 / $50+ / –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –±—é–¥–∂–µ—Ç",
                "field": "willingness_to_pay"
            }
        ]
    },

    "audience": {
        "title": "Audience",
        "emoji": "üë•",
        "intro": "–ö—Ç–æ —Ç–≤–æ–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏? –î–∞–≤–∞–π –Ω–∞—Ä–∏—Å—É–µ–º –ø–æ—Ä—Ç—Ä–µ—Ç.",
        "questions": [
            {
                "id": 1,
                "text": "–ö—Ç–æ —Ç–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?",
                "hint": "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–µ–ª–æ–≤–µ–∫: –ø—Ä–æ—Ñ–µ—Å—Å–∏—è, –≤–æ–∑—Ä–∞—Å—Ç, –∫–æ–Ω—Ç–µ–∫—Å—Ç",
                "field": "ideal_user"
            },
            {
                "id": 2,
                "text": "–ì–¥–µ —ç—Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç –≤—Ä–µ–º—è –æ–Ω–ª–∞–π–Ω?",
                "hint": "–°–æ—Ü—Å–µ—Ç–∏, —Ñ–æ—Ä—É–º—ã, —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –∫–∞–Ω–∞–ª—ã",
                "field": "channels"
            },
            {
                "id": 3,
                "text": "–ö–∞–∫–∏–µ —É –Ω–µ–≥–æ –≥–ª–∞–≤–Ω—ã–µ —Ü–µ–ª–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏?",
                "hint": "–ß–µ–≥–æ —Ö–æ—á–µ—Ç –¥–æ—Å—Ç–∏—á—å? –ß—Ç–æ –∏–º –¥–≤–∏–∂–µ—Ç?",
                "field": "goals"
            },
            {
                "id": 4,
                "text": "–ö–∞–∫–∏–µ –±–∞—Ä—å–µ—Ä—ã –º–µ—à–∞—é—Ç –µ–º—É —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å–∞–º–æ–º—É?",
                "hint": "–í—Ä–µ–º—è? –ó–Ω–∞–Ω–∏—è? –î–µ–Ω—å–≥–∏? –ú–æ—Ç–∏–≤–∞—Ü–∏—è?",
                "field": "barriers"
            },
            {
                "id": 5,
                "text": "–°–∫–æ–ª—å–∫–æ —Ç–∞–∫–∏—Ö –ª—é–¥–µ–π –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?",
                "hint": "–û—Ü–µ–Ω–∫–∞ —Ä—ã–Ω–∫–∞: —Ç—ã—Å—è—á–∏ / —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á / –º–∏–ª–ª–∏–æ–Ω—ã",
                "field": "market_size"
            }
        ]
    },

    "value": {
        "title": "Value Proposition",
        "emoji": "üíé",
        "intro": "–í —á—ë–º —Ü–µ–Ω–Ω–æ—Å—Ç—å? –ü–æ—á–µ–º—É –≤—ã–±–µ—Ä—É—Ç –∏–º–µ–Ω–Ω–æ —Ç–µ–±—è?",
        "questions": [
            {
                "id": 1,
                "text": "–ö–∞–∫–æ–π –≥–ª–∞–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?",
                "hint": "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π outcome: —ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏, –¥–µ–Ω–µ–≥, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–∏",
                "field": "main_outcome"
            },
            {
                "id": 2,
                "text": "–ó–∞ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?",
                "hint": "Time to value: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ / –∑–∞ –¥–µ–Ω—å / –∑–∞ –Ω–µ–¥–µ–ª—é",
                "field": "time_to_value"
            },
            {
                "id": 3,
                "text": "–ö–∞–∫—É—é –º–µ—Ç—Ä–∏–∫—É —É—Å–ø–µ—Ö–∞ –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?",
                "hint": "–ß—Ç–æ –∏–∑–º–µ—Ä–∏–º–æ —É–ª—É—á—à–∏—Ç—Å—è –≤ –µ–≥–æ –∂–∏–∑–Ω–∏?",
                "field": "success_metric"
            },
            {
                "id": 4,
                "text": "–ü–æ—á–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–µ—Ä–µ—Ç —Ç–µ–±—è, –∞ –Ω–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞?",
                "hint": "–ì–ª–∞–≤–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ –ø–æ–ª—å–∑—É —Ç–≤–æ–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è",
                "field": "competitive_advantage"
            },
            {
                "id": 5,
                "text": "–ö–∞–∫—É—é —ç–º–æ—Ü–∏—é –∏—Å–ø—ã—Ç–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?",
                "hint": "–û–±–ª–µ–≥—á–µ–Ω–∏–µ? –ì–æ—Ä–¥–æ—Å—Ç—å? –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å? –†–∞–¥–æ—Å—Ç—å?",
                "field": "emotional_outcome"
            }
        ]
    },

    "vision": {
        "title": "Vision",
        "emoji": "üöÄ",
        "intro": "–ö—É–¥–∞ –≤—Å—ë —ç—Ç–æ –≤–µ–¥—ë—Ç? –ö–∞–∫–∞—è –±–æ–ª—å—à–∞—è –∫–∞—Ä—Ç–∏–Ω–∞?",
        "questions": [
            {
                "id": 1,
                "text": "–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —É—Å–ø–µ—Ö —á–µ—Ä–µ–∑ 1 –≥–æ–¥?",
                "hint": "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≤—ã—Ä—É—á–∫–∞, –≤–ª–∏—è–Ω–∏–µ",
                "field": "year_one"
            },
            {
                "id": 2,
                "text": "–ö–∞–∫–æ–π –±–æ–ª—å—à–æ–π —Ä—ã–Ω–æ–∫ —Ç—ã —Ö–æ—á–µ—à—å –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –≤ –∏—Ç–æ–≥–µ?",
                "hint": "–ù–∞—á–Ω–∏ —Å –Ω–∏—à–∏, –Ω–æ –∫—É–¥–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—à—å—Å—è?",
                "field": "target_market"
            },
            {
                "id": 3,
                "text": "–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ –º–∏—Ä–µ, –µ—Å–ª–∏ —Ç—ã –¥–æ–±—å—ë—à—å—Å—è —É—Å–ø–µ—Ö–∞?",
                "hint": "–í–ª–∏—è–Ω–∏–µ –Ω–∞ –∏–Ω–¥—É—Å—Ç—Ä–∏—é, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ª—é–¥–µ–π, –æ–±—â–µ—Å—Ç–≤–æ",
                "field": "impact"
            },
            {
                "id": 4,
                "text": "–ö–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ milestone –Ω–∞ –ø—É—Ç–∏ –∫ –≤–∏–¥–µ–Ω–∏—é?",
                "hint": "3-5 –≥–ª–∞–≤–Ω—ã—Ö –≤–µ—Ö: MVP -> –ø–µ—Ä–≤—ã–µ –ø–ª–∞—Ç—è—â–∏–µ -> –∏ —Ç.–¥.",
                "field": "milestones"
            },
            {
                "id": 5,
                "text": "–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç—ã –¥–æ–ª–∂–µ–Ω —ç—Ç–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å?",
                "hint": "–¢–≤–æ–π unfair advantage: –æ–ø—ã—Ç, —Å–≤—è–∑–∏, –∏–Ω—Å–∞–π—Ç—ã",
                "field": "why_you"
            }
        ]
    }
}


def get_card_questions(card_type: str) -> Dict:
    """Get questions for a specific card type"""
    return IDEA_QUESTIONS.get(card_type.lower())


def get_question(card_type: str, question_number: int) -> Dict:
    """Get specific question from a card"""
    card = get_card_questions(card_type)
    if not card:
        return None
    questions = card.get("questions", [])
    if 1 <= question_number <= len(questions):
        return questions[question_number - 1]
    return None


def get_next_card(current_card: str) -> str:
    """Get next card in the IDEA flow"""
    try:
        current_index = IDEA_CARDS_ORDER.index(current_card.lower())
        if current_index < len(IDEA_CARDS_ORDER) - 1:
            return IDEA_CARDS_ORDER[current_index + 1]
    except ValueError:
        pass
    return None


def format_question_message(card_type: str, question_number: int) -> str:
    """Format a question for sending to user"""
    card = get_card_questions(card_type)
    question = get_question(card_type, question_number)

    if not card or not question:
        return None

    # First question includes card intro
    if question_number == 1:
        return f"{card['emoji']} **{card['title']}** ({question_number}/5)\n\n{card['intro']}\n\n**–í–æ–ø—Ä–æ—Å {question_number}:** {question['text']}\n\nüí° _{question['hint']}_"
    else:
        return f"{card['emoji']} **{card['title']}** ({question_number}/5)\n\n**–í–æ–ø—Ä–æ—Å {question_number}:** {question['text']}\n\nüí° _{question['hint']}_"
